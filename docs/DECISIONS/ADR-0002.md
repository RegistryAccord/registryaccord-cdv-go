# ADR-0002: Adopt Upstream Lexicon Shapes/NSIDs in API Naming

Date: 2025-10-08
Status: Accepted

## Context
Upstream `registryaccord-specs` defines schemas using Lexicon v1 JSON with NSIDs (reverse-DNS), tracked in `schemas/INDEX.md` and guided by `schemas/SPEC-README.md` with evolution rules in `GOVERNANCE.md`.

## Decision
- Our server API naming and data structures SHOULD mirror upstream Lexicon terms and NSIDs as a schema language only (e.g., identity operations align with `com.registryaccord.identity`).
- We will NOT tightly couple code generation yet; instead, we maintain a thin mapping layer and ensure request/response shapes use the same fields and naming where applicable.

## Rationale
- Lowers migration cost for atproto/RegistryAccord developers.
- Preserves flexibility while specs are `DRAFT` and evolving per governance rules.

## Consequences
- When upstream evolves additively, we adjust handlers and types additively.
- Breaking upstream changes require new endpoints/types on our side with clear deprecation paths, tracked in docs and CHANGELOG/ADR.
- CI MAY add an `api-validate` check to ensure names/types remain aligned.
